(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[105],{82730:(e,t,a)=>{Promise.resolve().then(a.bind(a,9326))},20754:(e,t,a)=>{"use strict";a.d(t,{A:()=>g});var s=a(95155),n=a(12115),i=a(76046),r=a(14565),l=a(83945),o=a(27058);let c=e=>{let{user:t,onClose:a}=e;return t?(0,s.jsx)("div",{className:"modal-overlay",onClick:a,children:(0,s.jsxs)("div",{className:"modal-content",onClick:e=>e.stopPropagation(),children:[(0,s.jsx)("button",{className:"modal-close",onClick:a,children:"\xd7"}),(0,s.jsxs)("div",{className:"profile-container",children:[(0,s.jsx)("img",{src:t.photoURL||"/assets/default-avatar.png",alt:"Profile",className:"profile-image"}),(0,s.jsx)("h1",{className:"profile-name",children:t.displayName||"User"}),(0,s.jsx)("p",{className:"profile-email",children:t.email})]})]})}):null};var d=a(10142),u=a(92340),m=a.n(u),h=a(40078),p=a.n(h);let x=async e=>{let t=new d.default,a=e.map(e=>[e.name,e.category,e.quantity]);for(let e of(m()(t,{head:[["Name","Category","Quantity"]],body:a,startY:20}),["pie-chart","bar-chart","least-stocked-chart"])){let a=document.getElementById(e);if(a){let e=(await p()(a)).toDataURL("image/png");t.addPage(),t.addImage(e,"PNG",10,10,180,100)}}t.save("inventory_report.pdf")},g=e=>{let{user:t}=e,a=(0,i.useRouter)(),d=(0,r.xI)(l.yA),[u,m]=(0,n.useState)(!1),[h,p]=(0,n.useState)(!1),[g,j]=(0,n.useState)([]),y=(0,n.useCallback)(async()=>{try{let e=(0,o.P)((0,o.rJ)(l.kA,"inventory"),(0,o._M)("userId","==",t.uid)),a=(await (0,o.GG)(e)).docs.map(e=>({id:e.id,...e.data()}));j(a)}catch(e){console.error("Failed to fetch items:",e.message)}},[t]);(0,n.useEffect)(()=>{t&&y()},[t,y]);let v=async()=>{let e=new r.HF;try{await (0,r.df)(d,e),a.push("/dashboard")}catch(e){console.error("Error signing in with Google:",e.message)}},f=async()=>{try{await (0,r.CI)(d),a.push("/")}catch(e){console.error("Error signing out:",e.message)}};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("nav",{className:"navbar",children:[(0,s.jsx)("img",{src:"/assets/logo.png",alt:"Logo",className:"logo",onClick:()=>a.push("/"),style:{cursor:"pointer"}}),(0,s.jsxs)("div",{className:"hamburger ".concat(h?"active":""),onClick:()=>p(!h),children:[(0,s.jsx)("div",{}),(0,s.jsx)("div",{}),(0,s.jsx)("div",{})]}),(0,s.jsx)("div",{className:"nav-links ".concat(h?"show":""),children:t?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("a",{onClick:()=>a.push("/dashboard"),children:"Dashboard"}),(0,s.jsx)("a",{onClick:()=>a.push("/analysis"),children:"Analysis"}),(0,s.jsx)("a",{onClick:()=>a.push("/generate-recipes"),children:"Generate Recipes"}),(0,s.jsx)("button",{onClick:()=>x(g),className:"exportButton mt-4 px-4 py-2 bg-blue-500 text-white rounded",children:"Export to PDF"}),(0,s.jsx)("img",{src:t.photoURL||"/assets/default-avatar.png",alt:"Profile",className:"user-avatar",onClick:()=>m(!0),style:{cursor:"pointer"}}),(0,s.jsx)("a",{onClick:f,className:"signoutButton",children:"Sign Out"})]}):(0,s.jsx)("button",{onClick:v,className:"signinButton",children:"Sign in with Google"})})]}),u&&(0,s.jsx)(c,{user:t,onClose:()=>m(!1)})]})}},9326:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>F});var s=a(95155),n=a(12115),i=a(14565),r=a(76046),l=a(83945),o=a(20754),c=a(1791),d=a(40842),u=a.n(d);a(35279);var m=a(41244),h=a.n(m);let p=e=>{let{onImageCaptured:t}=e,[a,i]=(0,n.useState)(!1),[r,l]=(0,n.useState)(null),o=(0,n.useRef)(null);return(0,s.jsx)("div",{className:"image-capture-container",children:a?(0,s.jsxs)("div",{className:"webcam-container",children:[(0,s.jsx)(h(),{audio:!1,ref:o,screenshotFormat:"image/jpeg",width:"100%"}),(0,s.jsx)("button",{onClick:()=>{let e=o.current.getScreenshot();l(e),t(e)},children:"Capture"}),(0,s.jsx)("button",{className:"clear-btn",onClick:()=>l(null),children:"Clear Image"}),r&&(0,s.jsx)("img",{src:r,alt:"Captured",className:"captured-image"}),(0,s.jsx)("button",{className:"close-btn",onClick:()=>i(!1),children:"Close Camera"})]}):(0,s.jsx)("button",{onClick:()=>i(!0),children:"Open Camera"})})};var x=a(91068);a(85716);let g=["Grains","Canned Goods","Dairy","Produce","Meat","Frozen Foods","Beverages","Snacks","Condiments"],j=["Top Shelf","Middle Shelf","Bottom Shelf","Left Side","Right Side","Front","Back","Pantry Door","Cabinet","Drawer"],y=["lbs (pounds)","oz (ounces)","kg (kilograms)","g (grams)","gal (gallons)","qt (quarts)","pt (pints)","c (cups)","fl oz (fluid ounces)","ml (milliliters)","l (liters)","pcs (pieces)","cans (cans)","bottles (bottles)","jars (jars)","boxes (boxes)","packs (packs)","tbsp (tablespoons)","tsp (teaspoons)","bags (bags)","slices (slices)","bars (bars)"],v=e=>{let{open:t,handleClose:a,item:i,setItem:r,addItem:l,updateItem:o,editMode:c}=e,[d,m]=(0,n.useState)(!1),h=e=>{let{name:t,value:a}=e.target;"function"==typeof r&&r(e=>({...e,[t]:a}))},v=e=>{let{name:t,value:a}=e.target;"function"==typeof r&&r(e=>({...e,[t]:a}))},f=()=>{for(let e of["name","category","quantity","unit","expirationDate","location"])if(!i[e])return x.oR.error("Please fill in the ".concat(e.replace(/([A-Z])/g," $1").toLowerCase(),".")),!1;return!0},N=i.expirationDate?new Date(i.expirationDate):null,b=i.lastUpdated?new Date(i.lastUpdated):null;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"modal ".concat(t?"open":""),children:(0,s.jsxs)("div",{className:"modal-content",children:[(0,s.jsx)("h2",{children:c?"Edit Item":"Add Item"}),(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsx)("label",{htmlFor:"name",children:"Item Name"}),(0,s.jsx)("input",{id:"name",name:"name",type:"text",value:i.name,onChange:h,placeholder:"Enter item name",required:!0})]}),(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsx)("label",{htmlFor:"category",children:"Category"}),(0,s.jsxs)("select",{id:"category",name:"category",value:i.category,onChange:v,required:!0,children:[(0,s.jsx)("option",{value:"",children:"Select a category"}),g.map(e=>(0,s.jsx)("option",{value:e,children:e},e))]})]}),(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsx)("label",{htmlFor:"quantity",children:"Quantity"}),(0,s.jsx)("input",{id:"quantity",name:"quantity",type:"number",value:i.quantity,onChange:h,min:"0",placeholder:"Enter quantity",required:!0})]}),(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsx)("label",{htmlFor:"unit",children:"Unit of Measurement"}),(0,s.jsxs)("select",{id:"unit",name:"unit",value:i.unit,onChange:v,required:!0,children:[(0,s.jsx)("option",{value:"",children:"Select a unit"}),y.map(e=>(0,s.jsx)("option",{value:e,children:e},e))]})]}),(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsx)("label",{htmlFor:"expirationDate",children:"Expiration Date"}),(0,s.jsx)(u(),{id:"expirationDate",selected:N,onChange:e=>{"function"==typeof r&&r(t=>({...t,expirationDate:e?e.toISOString():""}))},dateFormat:"yyyy-MM-dd",placeholderText:"Select expiration date",required:!0})]}),(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsx)("label",{htmlFor:"location",children:"Location"}),(0,s.jsxs)("select",{id:"location",name:"location",value:i.location,onChange:v,required:!0,children:[(0,s.jsx)("option",{value:"",children:"Select a location"}),j.map(e=>(0,s.jsx)("option",{value:e,children:e},e))]})]}),(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsx)("label",{htmlFor:"notes",children:"Notes"}),(0,s.jsx)("textarea",{id:"notes",name:"notes",value:i.notes,onChange:h,placeholder:"Enter any notes (optional)"})]}),(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsx)("button",{type:"button",onClick:()=>m(!d),children:d?"Close Image Capture":"Capture Image"}),d&&(0,s.jsx)(p,{onImageCaptured:e=>{"function"==typeof r&&r(t=>({...t,photo:e})),m(!1)}})]}),(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsx)("label",{htmlFor:"photo",children:"Captured Photo"}),i.photo&&(0,s.jsx)("img",{src:i.photo,alt:"Captured"})]}),(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsx)("button",{type:"button",onClick:()=>{if(f()){let e={...i,notes:""===i.notes.trim()?"N/A":i.notes,lastUpdated:new Date().toISOString()};c?o(e):l(e),a(),x.oR.success("Item ".concat(c?"updated":"added"," successfully!"))}},style:{background:"#4CAF4F"},children:c?"Update Item":"Add Item"}),(0,s.jsx)("button",{type:"button",onClick:a,children:"Cancel"})]}),b&&(0,s.jsxs)("p",{className:"last-updated",children:["Last Updated: ",b.toLocaleString()]})]})}),(0,s.jsx)(x.N9,{})]})},f=e=>{let t=new Date(e),a=t.getFullYear(),s=String(t.getMonth()+1).padStart(2,"0"),n=String(t.getDate()).padStart(2,"0");return"".concat(a,"/").concat(s,"/").concat(n)},N=e=>new Date(e).toLocaleString(),b=e=>{let{inventory:t,removeItem:a,editItem:n}=e;return(0,s.jsx)("div",{className:"inventory-list",children:0===t.length?(0,s.jsx)("p",{className:"empty-message",children:"Your inventory is empty. Add some items to get started!"}):t.map(e=>(0,s.jsxs)("div",{className:"inventory-item",children:[(0,s.jsxs)("div",{className:"item-info",children:[(0,s.jsx)("h2",{className:"item-name",children:e.name.charAt(0).toUpperCase()+e.name.slice(1)}),(0,s.jsxs)("p",{className:"item-detail",children:[(0,s.jsx)("strong",{children:"Category:"})," ",e.category]}),(0,s.jsxs)("p",{className:"item-detail",children:[(0,s.jsx)("strong",{children:"Quantity:"})," ",e.quantity," ",e.unit]}),(0,s.jsxs)("p",{className:"item-detail",children:[(0,s.jsx)("strong",{children:"Expiration Date:"})," ",e.expirationDate?f(e.expirationDate):"N/A"]}),(0,s.jsxs)("p",{className:"item-detail",children:[(0,s.jsx)("strong",{children:"Location:"})," ",e.location]}),(0,s.jsxs)("p",{className:"item-detail",children:[(0,s.jsx)("strong",{children:"Notes:"})," ",e.notes]}),(0,s.jsxs)("p",{className:"item-detail",children:[(0,s.jsx)("strong",{children:"Last Updated:"})," ",e.lastUpdated?N(e.lastUpdated):"N/A"]}),(0,s.jsxs)("div",{className:"item-actions",children:[(0,s.jsx)("button",{className:"edit-btn",onClick:()=>n(e),children:"Edit"}),(0,s.jsx)("button",{className:"remove-btn",onClick:()=>a(e.id),children:"Remove"})]})]}),e.photo&&(0,s.jsx)("div",{className:"item-photo-container",children:(0,s.jsx)("img",{src:e.photo,alt:e.name,className:"item-photo"})})]},e.id))})};var C=a(7831),k=a(27058),S=a(70719),w=a.n(S),D=a(74867);let I=function(e){let{user:t}=e,[a,i]=(0,n.useState)([]),[r,o]=(0,n.useState)([]),[d,u]=(0,n.useState)(""),[m,h]=(0,n.useState)(!1),[p,x]=(0,n.useState)(!1),[g,j]=(0,n.useState)({name:"",category:"",quantity:"",unit:"",expirationDate:"",location:"",notes:"",lastUpdated:""}),[y,f]=(0,n.useState)([]),[N,S]=(0,n.useState)(!1),{enqueueSnackbar:I}=(0,C.dh)(),[F,A]=(0,n.useState)(""),[E,q]=(0,n.useState)(""),[U,L]=(0,n.useState)(""),G=(0,n.useCallback)(e=>e.filter(e=>{let t=!F||e.category===F,a=!E||new Date(e.expirationDate)<=new Date(E),s=!U||e.quantity>=Number(U);return t&&a&&s}),[F,E,U]);(0,n.useEffect)(()=>{o(G(a))},[a,G]);let M=(0,n.useCallback)(async()=>{try{let e=(0,k.P)((0,k.rJ)(l.kA,"inventory"),(0,k._M)("userId","==",t.uid)),a=(await (0,k.GG)(e)).docs.map(e=>({id:e.id,...e.data()}));i(a),o(a),P(a)}catch(e){I("Failed to fetch items.",{variant:"error"})}},[t,I]);(0,n.useEffect)(()=>{t&&M()},[t,M]);let P=(0,n.useCallback)(e=>{let t=new Date;f(e.reduce((e,a)=>{if(a.expirationDate){let s=new Date(a.expirationDate);7>=Math.ceil((s-t)/864e5)&&e.push({type:"expiring",message:"Item ".concat(a.name," is expiring soon."),date:s.toLocaleDateString()})}return a.quantity<5&&e.push({type:"low",message:"Item ".concat(a.name," is running low."),count:a.quantity}),e},[]))},[]),R=(0,n.useCallback)(w()(e=>{if(e){let t=e.toLowerCase();o(a.filter(e=>e.name.toLowerCase().includes(t)||e.category.toLowerCase().includes(t)))}else o(a)},300),[a]),B=async e=>{if(!(null==t?void 0:t.uid)){console.error("User is not authenticated or user ID is missing."),I("User is not authenticated.",{variant:"error"});return}try{await (0,k.gS)((0,k.rJ)(l.kA,"inventory"),{...e,userId:t.uid}),M(),I("Item added successfully!",{variant:"success"})}catch(e){console.error("Error adding item:",e),I("Failed to add item.",{variant:"error"})}},O=async e=>{try{let t=(0,k.H9)(l.kA,"inventory",e.id);await (0,k.mZ)(t,e),M(),I("Item updated successfully!",{variant:"success"})}catch(e){console.error("Error updating item:",e),I("Failed to update item.",{variant:"error"})}},_=async e=>{try{await (0,k.kd)((0,k.H9)(l.kA,"inventory",e)),M(),I("Item deleted successfully!",{variant:"success"})}catch(e){console.error("Error deleting item:",e),I("Failed to delete item.",{variant:"error"})}},T=()=>{S(!N)};return(0,s.jsxs)("div",{className:"pantry-container",children:[(0,s.jsxs)("div",{className:"header",children:[(0,s.jsx)("button",{className:"add-button",onClick:()=>{j({name:"",category:"",quantity:"",unit:"",expirationDate:"",location:"",notes:"",lastUpdated:""}),x(!1),h(!0)},children:"Add Item"}),(0,s.jsx)("button",{className:"notifications-button",onClick:T,children:(0,s.jsxs)("div",{className:"notifications-content",children:[(0,s.jsx)(c.A,{}),(0,s.jsx)("span",{className:"notification-count",children:y.length})]})})]}),(0,s.jsx)("div",{className:"search-bar",children:(0,s.jsx)("input",{type:"text",placeholder:"Search...",value:d,onChange:e=>{u(e.target.value),R(e.target.value)}})}),(0,s.jsxs)("div",{className:"filters",children:[(0,s.jsxs)("div",{className:"filter-group",children:[(0,s.jsx)("label",{htmlFor:"category-filter",children:"Category"}),(0,s.jsxs)("select",{id:"category-filter",value:F,onChange:e=>A(e.target.value),children:[(0,s.jsx)("option",{value:"",children:"All Categories"}),["Grains","Canned Goods","Dairy","Produce","Meat","Frozen Foods","Beverages","Snacks","Condiments","Other"].map(e=>(0,s.jsx)("option",{value:e,children:e},e))]})]}),(0,s.jsxs)("div",{className:"filter-group",children:[(0,s.jsx)("label",{htmlFor:"expiration-filter",children:"Filter by Expiration Date"}),(0,s.jsx)("input",{id:"expiration-filter",type:"date",value:E,onChange:e=>q(e.target.value)})]}),(0,s.jsxs)("div",{className:"filter-group",children:[(0,s.jsx)("label",{htmlFor:"quantity-filter",children:"Filter by Minimum Quantity"}),(0,s.jsx)("input",{id:"quantity-filter",type:"number",min:"0",value:U,onChange:e=>L(e.target.value)})]})]}),(0,s.jsx)(b,{inventory:r,removeItem:_,editItem:e=>{j(e),x(!0),h(!0)}}),(0,s.jsx)(v,{open:m,handleClose:()=>{h(!1)},item:g,setItem:j,addItem:B,updateItem:O,editMode:p}),N&&(0,s.jsxs)("div",{className:"notifications-panel",children:[(0,s.jsxs)("div",{className:"panel-header",children:[(0,s.jsx)("h3",{children:"Notifications"}),(0,s.jsx)("button",{className:"close-notifications",onClick:T,children:(0,s.jsx)(D.A,{})})]}),(0,s.jsx)("ul",{children:y.map((e,t)=>(0,s.jsxs)("li",{children:[(0,s.jsx)("span",{children:e.message}),e.date&&(0,s.jsxs)("span",{children:[" - ",e.date]}),e.count&&(0,s.jsxs)("span",{children:[" - ",e.count," remaining"]})]},t))})]})]})},F=function(){let e=(0,r.useRouter)(),t=(0,i.xI)(l.yA),[a,c]=(0,n.useState)(null),[d,u]=(0,n.useState)(!1),[m,h]=(0,n.useState)(!1);return(0,n.useEffect)(()=>{let a=(0,i.hg)(t,t=>{t?c(t):(c(null),e.push("/"))});return()=>a()},[t,e]),(0,s.jsxs)("div",{className:"dashboard",children:[(0,s.jsx)(o.A,{user:a,setShowNotifications:u,setModalOpen:h}),(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center h-screen bg-gray-100",children:[(0,s.jsxs)("div",{style:{marginTop:"85px",textAlign:"center"},children:[(0,s.jsxs)("h1",{children:["Hi ",a?a.displayName:"Guest","!"]}),(0,s.jsx)("p",{children:"Manage your pantry items efficiently and never run out of your essential groceries. Get notified about low stock items, track your pantry inventory, and much more!"})]}),(0,s.jsx)(I,{user:a,showNotifications:d,setShowNotifications:u,modalOpen:m,setModalOpen:h})]})]})}},83945:(e,t,a)=>{"use strict";a.d(t,{kA:()=>l,yA:()=>r});var s=a(49904),n=a(76553),i=a(27058);let r=(0,s.Wp)({apiKey:"AIzaSyC8Dymk0ybzXTC_TdaCKBEyQ8tchcDUCYU",authDomain:"pantry-tracker-21503.firebaseapp.com",projectId:"pantry-tracker-21503",storageBucket:"pantry-tracker-21503.firebasestorage.app",messagingSenderId:"880269408747",appId:"1:880269408747:web:844a0971fb7736eaccc1ae",measurementId:"G-4571ENLK2C"}),l=(0,i.aU)(r);(0,n.TT)().then(e=>{e&&(0,n.P5)(r)})}},e=>{var t=t=>e(e.s=t);e.O(0,[772,992,794,316,930,915,107,687,638,441,517,358],()=>t(82730)),_N_E=e.O()}]);