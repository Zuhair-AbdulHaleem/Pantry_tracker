(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[290],{98027:(e,a,s)=>{Promise.resolve().then(s.bind(s,66383))},20754:(e,a,s)=>{"use strict";s.d(a,{A:()=>x});var t=s(95155),r=s(12115),n=s(76046),i=s(14565),c=s(83945),l=s(27058);let o=e=>{let{user:a,onClose:s}=e;return a?(0,t.jsx)("div",{className:"modal-overlay",onClick:s,children:(0,t.jsxs)("div",{className:"modal-content",onClick:e=>e.stopPropagation(),children:[(0,t.jsx)("button",{className:"modal-close",onClick:s,children:"\xd7"}),(0,t.jsxs)("div",{className:"profile-container",children:[(0,t.jsx)("img",{src:a.photoURL||"/assets/default-avatar.png",alt:"Profile",className:"profile-image"}),(0,t.jsx)("h1",{className:"profile-name",children:a.displayName||"User"}),(0,t.jsx)("p",{className:"profile-email",children:a.email})]})]})}):null};var d=s(10142),m=s(92340),p=s.n(m),u=s(40078),h=s.n(u);let g=async e=>{let a=new d.default,s=e.map(e=>[e.name,e.category,e.quantity]);for(let e of(p()(a,{head:[["Name","Category","Quantity"]],body:s,startY:20}),["pie-chart","bar-chart","least-stocked-chart"])){let s=document.getElementById(e);if(s){let e=(await h()(s)).toDataURL("image/png");a.addPage(),a.addImage(e,"PNG",10,10,180,100)}}a.save("inventory_report.pdf")},x=e=>{let{user:a}=e,s=(0,n.useRouter)(),d=(0,i.xI)(c.yA),[m,p]=(0,r.useState)(!1),[u,h]=(0,r.useState)(!1),[x,y]=(0,r.useState)([]),j=(0,r.useCallback)(async()=>{try{let e=(0,l.P)((0,l.rJ)(c.kA,"inventory"),(0,l._M)("userId","==",a.uid)),s=(await (0,l.GG)(e)).docs.map(e=>({id:e.id,...e.data()}));y(s)}catch(e){console.error("Failed to fetch items:",e.message)}},[a]);(0,r.useEffect)(()=>{a&&j()},[a,j]);let b=async()=>{let e=new i.HF;try{await (0,i.df)(d,e),s.push("/dashboard")}catch(e){console.error("Error signing in with Google:",e.message)}},f=async()=>{try{await (0,i.CI)(d),s.push("/")}catch(e){console.error("Error signing out:",e.message)}};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("nav",{className:"navbar",children:[(0,t.jsx)("img",{src:"/assets/logo.png",alt:"Logo",className:"logo",onClick:()=>s.push("/"),style:{cursor:"pointer"}}),(0,t.jsxs)("div",{className:"hamburger ".concat(u?"active":""),onClick:()=>h(!u),children:[(0,t.jsx)("div",{}),(0,t.jsx)("div",{}),(0,t.jsx)("div",{})]}),(0,t.jsx)("div",{className:"nav-links ".concat(u?"show":""),children:a?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("a",{onClick:()=>s.push("/dashboard"),children:"Dashboard"}),(0,t.jsx)("a",{onClick:()=>s.push("/analysis"),children:"Analysis"}),(0,t.jsx)("a",{onClick:()=>s.push("/generate-recipes"),children:"Generate Recipes"}),(0,t.jsx)("button",{onClick:()=>g(x),className:"exportButton mt-4 px-4 py-2 bg-blue-500 text-white rounded",children:"Export to PDF"}),(0,t.jsx)("img",{src:a.photoURL||"/assets/default-avatar.png",alt:"Profile",className:"user-avatar",onClick:()=>p(!0),style:{cursor:"pointer"}}),(0,t.jsx)("a",{onClick:f,className:"signoutButton",children:"Sign Out"})]}):(0,t.jsx)("button",{onClick:b,className:"signinButton",children:"Sign in with Google"})})]}),m&&(0,t.jsx)(o,{user:a,onClose:()=>p(!1)})]})}},83945:(e,a,s)=>{"use strict";s.d(a,{kA:()=>c,yA:()=>i});var t=s(49904),r=s(76553),n=s(27058);let i=(0,t.Wp)({apiKey:"AIzaSyC8Dymk0ybzXTC_TdaCKBEyQ8tchcDUCYU",authDomain:"pantry-tracker-21503.firebaseapp.com",projectId:"pantry-tracker-21503",storageBucket:"pantry-tracker-21503.firebasestorage.app",messagingSenderId:"880269408747",appId:"1:880269408747:web:844a0971fb7736eaccc1ae",measurementId:"G-4571ENLK2C"}),c=(0,n.aU)(i);(0,r.TT)().then(e=>{e&&(0,r.P5)(i)})},66383:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>m});var t=s(95155),r=s(12115),n=s(14565),i=s(76046),c=s(83945),l=s(20754),o=s(27058);let d=e=>{let{pantryItems:a}=e,[s,n]=(0,r.useState)([]),[i,c]=(0,r.useState)(!1),l=async()=>{c(!0);try{let e=await fetch("https://openrouter.ai/api/v1/chat/completions",{method:"POST",headers:{Authorization:"Bearer ".concat("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"),"Content-Type":"application/json"},body:JSON.stringify({model:"meta-llama/llama-3.1-8b-instruct",messages:[{role:"user",content:"Generate at least 3 recipes using the following ingredients: ".concat(a.map(e=>"".concat(e.amount," ").concat(e.name)).join(", ")," and explain them in 5 lines.")}]})});if(!e.ok)throw Error("HTTP error! status: ".concat(e.status));let s=(await e.json()).choices[0].message.content.split(/Recipe \d+:/).filter(e=>""!==e.trim()).map(e=>{let[a,...s]=e.split("\n").filter(e=>""!==e.trim());return{title:a.replace(/\*/g,"").trim(),steps:s.map(e=>e.replace(/\*/g,"").trim()).filter(e=>""!==e)}});n(s)}catch(e){console.error("Error generating recipes: ",e)}finally{c(!1)}};return(0,t.jsxs)("div",{className:"recipe-suggestions",children:[(0,t.jsx)("button",{className:"generate-button ".concat(i?"loading":""),onClick:l,disabled:i||0===a.length,children:"Generate Recipes"}),(0,t.jsx)("br",{}),(0,t.jsx)("br",{}),(0,t.jsx)("br",{}),s.length>0&&(0,t.jsx)("div",{className:"recipe-cards",children:s.map((e,a)=>(0,t.jsxs)("div",{className:"recipe-card",children:[(0,t.jsx)("h3",{children:e.title}),e.steps.map((e,a)=>(0,t.jsx)("div",{className:"recipe-step",children:(0,t.jsx)("p",{children:e})},a))]},a))})]})},m=function(){let e=(0,i.useRouter)(),a=(0,n.xI)(c.yA),[s,m]=(0,r.useState)(null),[p,u]=(0,r.useState)([]),h=(0,r.useCallback)(async()=>{try{let e=(0,o.P)((0,o.rJ)(c.kA,"inventory"),(0,o._M)("userId","==",s.uid)),a=(await (0,o.GG)(e)).docs.map(e=>({id:e.id,...e.data()}));u(a)}catch(e){console.error("Failed to fetch items:",e.message)}},[s]);return(0,r.useEffect)(()=>{let s=(0,n.hg)(a,a=>{a?m(a):(m(null),e.push("/"))});return()=>s()},[a,e]),(0,r.useEffect)(()=>{s&&h()},[s,h]),(0,t.jsxs)("div",{className:"dashboard",children:[(0,t.jsx)(l.A,{user:s,setShowNotifications:()=>{},setModalOpen:()=>{}}),(0,t.jsx)("div",{className:"flex flex-col items-center justify-center h-screen bg-gray-100",children:(0,t.jsxs)("div",{style:{marginTop:"85px",textAlign:"center"},children:[(0,t.jsx)("h1",{className:"text-3xl font-bold mb-4",children:"Recipe Suggestions"}),(0,t.jsx)("p",{className:"text-lg mb-8",children:"Click the button below to discover 3 delicious recipes that can be made using the items present in your pantry."}),(0,t.jsx)("br",{}),(0,t.jsx)(d,{pantryItems:p})]})})]})}}},e=>{var a=a=>e(e.s=a);e.O(0,[992,794,316,930,107,441,517,358],()=>a(98027)),_N_E=e.O()}]);